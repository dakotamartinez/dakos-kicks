#!/usr/bin/env node

const path = require('path');
require('dotenv').config({
  path: path.resolve(__dirname, '..', '.env'),
});

const Cart = require('../src/cart/cart');
const db = require('../src/db/db');
const app = require('../app');
const http = require('http');

const server = http.createServer(app);
const hostname = process.env.HOST || '0.0.0.0';
const port = process.env.PORT || 3000;


db.createDb(process.env.DB_NAME)
  .then(() => db.createTable(Cart))
  .then(() => {
    server.listen(port, hostname, () => {
      console.log(`
        API Listening on:
        http://${hostname}:${port}
      `);
    });
  })

